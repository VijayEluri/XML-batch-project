<?xml version="1.0"?>
<core:executer xmlns='edu.bxml.format' xmlns:io='edu.bxml.io'  
			xmlns:core='com.browsexml.core' 
			xmlns:ftp='edu.bxml.ftp' 
			xmlns:format='edu.bxml.format'
			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
			xsi:schemaLocation="
			edu.bxml.format file:///C:/Users/geoff.ritchey/workspace/browsexml/edu_bxml_format.xsd 
			edu.bxml.io file:///C:/Users/geoff.ritchey/workspace/browsexml/edu_bxml_io.xsd
			edu.bxml.ftp file:///C:/Users/geoff.ritchey/workspace/browsexml/edu_bxml_ftp.xsd  
			com.browsexml.core file:///C:/Users/geoff.ritchey/workspace/browsexml/com_browsexml_core.xsd"
	>
	<format:property name="csvFile" text="x.csv"></format:property>
	<format:property name="lastSentCsvFile" text="lastSentCsvFile.csv"></format:property>
	<format:property name="toDir" text="."></format:property>
	<format:property name="dir" text="."></format:property>
	<format:property name="archive" text="archive"></format:property>
	
	<ftp:ftp iff="true">
		<ftp:execute connection="ecampus">
			<ftp:list name="remoteFiles" filename="diff.*\.csv"/>
			<core:executer iff="javascript: !remoteFiles.getFound()">
				<io:Move dir="${toDir}" file="${lastSentCsvFile}" 
						toDir="${archive}" toFile="sentArchive#{yyyy-MM-dd}.csv" 
						force="true" iff="false"/>
				<io:Move dir="${dir}" file="${csvFile}" toDir="${toDir}" toFile="${lastSentCsvFile}" 
						force="true" iff="false" />
			</core:executer>
			<core:executer iff="javascript: remoteFiles.getFound()">
				<ftp:rm dir="." file="diff.*\.csv"></ftp:rm>
			</core:executer>
		</ftp:execute>
		<ftp:connection name="ecampus" host="ftp.ecampus.com" 
			login="Lubbock" password="LCUf1l3s" channelType="ftp"/>
	</ftp:ftp>
</core:executer>